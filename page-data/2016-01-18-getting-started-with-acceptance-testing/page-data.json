{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2016-01-18-getting-started-with-acceptance-testing/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Diego Castillo"}},"markdownRemark":{"id":"ab1ed33e-7847-5f6e-96b7-e1579545078b","excerpt":"At Ubiqua, as we started to grow both our product and engineering team, we realized some things had to be re-prioritized and fixed. Some of the problems we were…","html":"<p>At <a href=\"http://www.ubiqua.me/\">Ubiqua</a>, as we started to grow both our product and engineering team, we realized some things had to be re-prioritized and fixed. Some of the problems we were having were:</p>\n<ul>\n<li>Onboarding for new developers took more time than we desired. This was mainly being cause by legacy code and the bad documentation of features and processes.</li>\n<li>Software engineers were not able to determine if a specific bug fix or feature broke older functionality.</li>\n<li>Slow production line. We needed to spend a lot of time manually testing if new functionality behaved as expected and did not break anything else.</li>\n</ul>\n<p>As a result of this, we decided to change our development workflow to a more collaborative and documented process, where changes to the codebase followed a specific set of actions. These actions are:</p>\n<ul>\n<li>All new features must include tests (bonus points for using TDD).</li>\n<li>Bug fixes must include a corresponding regression test.</li>\n<li>One test must be added to the existing codebase every week.</li>\n</ul>\n<p>One of the tools we chose for our plan of action was <a href=\"https://cucumber.io/\">Cucumber</a>. In this blogpost I will guide you through the basics and good practices of writing acceptance tests with it.</p>\n<h3>Acceptance Tests</h3>\n<p>An acceptance test demonstrates what a feature (or system) needs to do in order for the stakeholders to find it acceptable. At Ubiqua, we like to think of testing in the following way:</p>\n<ul>\n<li>Acceptance tests: build the right thing.</li>\n<li>Unit tests: build the thing right.</li>\n</ul>\n<p>Cucumber allows us to write acceptance tests by specifying a concrete number of executable examples (build the right thing) of how the system should behave under certain circumstances. Writing down these examples encourages a team to think about the different use-cases that a feature needs to serve which in turn assists in revealing insights about other feature use-cases that were unknown at the beginning of the iteration. Such practices help to avoid a <a href=\"http://xyproblem.info/\">solution looking for a problem</a> and consecutively boost the team’s productivity.</p>\n<h3>Overview of a Cucumber Feature</h3>\n<p>A Cucumber feature is a set of examples of how the system should behave under certain circumstances. Each feature is made of a number of examples called <code class=\"language-text\">Scenarios</code>. Scenarios must be independent and usually follow this pattern:</p>\n<ul>\n<li>Context: Put the system in a particular state (<code class=\"language-text\">Given</code>).</li>\n<li>Action: Do something with the system (<code class=\"language-text\">When</code>).</li>\n<li>Expectation: Examine the new state is correct (<code class=\"language-text\">Then</code>).</li>\n</ul>\n<p>Features in Cucumber are written in <code class=\"language-text\">Gherkin</code>. Gherkin is a language used to facilitate communication with stakeholders to illustrate what the software should do. The greatest advantage of using Gherkin is that it is designed for human readability and thus helps developers to interact with stakeholders and create documentation at the same time.</p>\n<h3>A Cucumber Feature Example</h3>\n<p>A simple Cucumber feature usually consists of the following components:</p>\n<ul>\n<li><code class=\"language-text\">Feature</code>: A convenient place to put a summary and documentation about the group of tests that follow.</li>\n<li><code class=\"language-text\">Scenario</code>: A concrete example of the desired behavior of the system under certain circumstances.</li>\n<li>A list of <code class=\"language-text\">Steps</code>: Steps are plain language instructions of what the system/user will do and the desired output it should create. It allows developers to pass parameters of the values that are relevant to the scenario by using regular expressions.</li>\n</ul>\n<p>Let’s go ahead and write a simple Cucumber feature to verify that a user is able to send an order with some products to a specific client:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">Feature<span class=\"token operator\">:</span> Create an Order\n\n  Ubiqua allows salesmen to order products <span class=\"token keyword\">for</span> their clients<span class=\"token punctuation\">.</span>\n\n  <span class=\"token symbol\">Scenario</span><span class=\"token operator\">:</span> Order Some Products\n    Given <span class=\"token constant\">I</span> am logged <span class=\"token keyword\">in</span> as a salesman assigned to <span class=\"token string-literal\"><span class=\"token string\">\"Farmacia Moreno\"</span></span><span class=\"token punctuation\">,</span> with the following products<span class=\"token operator\">:</span>\n      <span class=\"token operator\">|</span> product_name  <span class=\"token operator\">|</span> price <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> Caja Gatorade <span class=\"token operator\">|</span> <span class=\"token number\">1.00</span>  <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> Botella Agua  <span class=\"token operator\">|</span> <span class=\"token number\">2.00</span>  <span class=\"token operator\">|</span>\n    When <span class=\"token constant\">I</span> send an order <span class=\"token keyword\">for</span> client <span class=\"token string-literal\"><span class=\"token string\">\"Farmacia Moreno\"</span></span> with the following products<span class=\"token operator\">:</span>\n      <span class=\"token operator\">|</span> product_name  <span class=\"token operator\">|</span> quantity <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> Caja Gatorade <span class=\"token operator\">|</span> <span class=\"token number\">2</span>        <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> Botella Agua  <span class=\"token operator\">|</span> <span class=\"token number\">4</span>        <span class=\"token operator\">|</span>\n    Then the order should have total price $<span class=\"token number\">10.00</span></code></pre></div>\n<p>A scenario should be easy to read and understand. It should avoid mentioning details that have no actual relevance to the purpose of the scenario (incidental details). In a sense, it is like a joke; if you have to explain it, then it is a bad one.</p>\n<p>Scenario steps are translated into system actions by <code class=\"language-text\">step definitions</code>. A step definition is similar to a method definition; it can take 0 or more arguments identified by groups in the regular expression of the step. The step definition for the first step of the scenario above will look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">Given<span class=\"token punctuation\">(</span><span class=\"token regex-literal\"><span class=\"token regex\">/^I am logged in as a salesman assigned to \"(.*?)\", with the following products:$/</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>client<span class=\"token punctuation\">,</span> table<span class=\"token operator\">|</span>\n  salesman <span class=\"token operator\">=</span> Support<span class=\"token double-colon punctuation\">::</span>Salesman<span class=\"token punctuation\">.</span>find_or_create\n  client <span class=\"token operator\">=</span> Support<span class=\"token double-colon punctuation\">::</span><span class=\"token class-name\">Client</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span>\n  Support<span class=\"token double-colon punctuation\">::</span>Salesman<span class=\"token punctuation\">.</span>assign_client<span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span>\n  Support<span class=\"token double-colon punctuation\">::</span>Product<span class=\"token punctuation\">.</span>assign_products<span class=\"token punctuation\">(</span>salesman<span class=\"token punctuation\">,</span> table<span class=\"token punctuation\">.</span>hashes<span class=\"token punctuation\">)</span>\n  LoginPage<span class=\"token punctuation\">.</span>visit<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>salesman<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>Some of the code has been abstracted for simplicity, but the main idea of what a step definition should do is still clear. The step definition communicates with the system and executes the necessary actions to be able to compare the system against a particular state later on.</p>\n<p>Just as unit tests do, Cucumber will run each step in the scenario and mark it as passing if no exceptions are thrown. If an exception is thrown, it will stop executing the steps of that scenario and mark it as failing. If all the steps in the scenario pass, then it will mark that scenario as passing. It is common to use Cucumber with an assertion library such as <a href=\"http://rspec.info/\">RSpec</a> to be able to compare the result of particular action to the expected value.</p>\n<h3>Conclusion</h3>\n<p>We have found acceptance tests have helped us to be more efficient and to have the courage to perform major surgery to our codebase. At the same time, as we are making our product more robust and reliable, we are creating documentation for it which is easy to read and explain to other people. I would highly recommend reading <a href=\"http://www.amazon.com/The-Cucumber-Book-Behaviour-Driven-Development/dp/1934356808\">The Cucumber Book</a>, as it will help you to both improve your software engineering skills and have a greater understanding of acceptance testing (using Cucumber as a tool for it) and its goal.</p>","fileAbsolutePath":"/Users/diego/diegocasmo/diegocasmo.github.io/content/blog/2016-01-18-getting-started-with-acceptance-testing.md","frontmatter":{"title":"Getting Started With Acceptance Testing","date":"January 18, 2016","description":null}},"previous":{"fields":{"slug":"/2016-01-01-depth-first-search-undirected-graphs/"},"frontmatter":{"title":"Depth First Search In Undirected Graphs"}},"next":{"fields":{"slug":"/2016-01-28-better-performance-on-the-client/"},"frontmatter":{"title":"Improving Application Performance and Responsiveness on the Client"}}},"pageContext":{"id":"ab1ed33e-7847-5f6e-96b7-e1579545078b","previousPostId":"6dde9c80-9952-5073-adfc-d87e0b29501b","nextPostId":"3cbab1e7-b7a8-5d96-a767-4b0a855b0819"}},
    "staticQueryHashes": ["650872877"]}